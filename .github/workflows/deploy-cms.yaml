name: Vercel Production Deployment

on:
  push:
    branches:
      - main

jobs:
  Deploy-Production:
    runs-on: ubuntu-latest
    steps:
      - name: Check repository
        run: echo "DEPLOY_REPO=${{ secrets.DEPLOY_REPO }}" >> $GITHUB_ENV

      - name: Skip job if not correct repo
        if: github.repository != env.DEPLOY_REPO
        run: exit 0 # This stops the job

      - name: Set Environment Variable
        run: echo "VERCEL_GIT_HOOK=${{ secrets.VERCEL_GIT_HOOK }}" >> $GITHUB_ENV

      - name: Trigger Vercel Deployment
        run: |
          curl -X GET "$VERCEL_GIT_HOOK"
